<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Auto_Login_Token">

<!-- resultType 으로 값을 반환하지 못해 resultMap 사용하여 DTO로 반환 -->
<resultMap id="AutoLoginTokenResultMap" type="com.osd.web.app.dto.Auto_Login_TokenDto">
    <result column="TOKEN" property="token"/>
	<result column="USER_ID" property="user_id"/>
    <result column="EXPIRY_DATE" property="expiry_date"/>
</resultMap>

<insert id = "insert" parameterType="Auto_Login_TokenDto">
	insert into auto_login_token (TOKEN, USER_ID, EXPIRY_DATE) values(#{token}, #{user_id}, #{expiry_date})
</insert>

<select id="selectByTokenAndId" parameterType="Auto_Login_TokenDto" resultMap="AutoLoginTokenResultMap">
    select * from AUTO_LOGIN_TOKEN
    <where>
    TOKEN = #{token} 
    and 
    USER_ID = #{user_id}
    </where>
</select>

<delete id="deleteByTokenAndId" parameterType="Auto_Login_TokenDto">
    delete AUTO_LOGIN_TOKEN
    <where>
        TOKEN = #{token} 
        and
        USER_ID = #{user_id} 
    </where>
</delete>

<delete id="deleteById" parameterType="Auto_Login_TokenDto">
    delete AUTO_LOGIN_TOKEN
    <where>
        USER_ID = #{user_id}
    </where>
</delete>
   		
        
</mapper>