<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Board_Comment">

<!-- resultType 으로 값을 반환하지 못해 resultMap 사용하여 DTO로 반환 -->
<resultMap id="BoardCommentResultMap" type="com.osd.web.app.dto.Board_CommentDto">
    <result column="POST_ID" property="post_id"/>
    <result column="CMT_ID" property="cmt_id"/>
    <result column="PARENT_CMT_ID" property="parent_cmt_id"/>
    <result column="CMT_CONTENT" property="cmt_content"/>    
    <result column="CMT_LIKECNT" property="cmt_likecnt"/>
    <result column="CMT_CREATED_AT" property="cmt_created_at"/>
    <result column="CMT_UPDATED_AT" property="cmt_updated_at"/>
    <result column="USER_ID" property="user_id"/>
    <result column="USER_NICKNAME" property="user_nickname"/>
	<result column="USER_IMG" property="user_img"/>
</resultMap>

<select id="selectCunsultCmtByPost" parameterType="int" resultMap="BoardCommentResultMap">
    select a.cmt_id, a.cmt_content, a.post_id, a.parent_cmt_id, a.cmt_likecnt, a.cmt_created_at, a.cmt_updated_at, b.user_id, b.user_nickname, b.user_img 
	from cunsult_comment as a join user_info as b on a.user_id = b.user_id
		where post_id = #{post_id}
        order by a.cmt_created_at asc;


</select>




</mapper>